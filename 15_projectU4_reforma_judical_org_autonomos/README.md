# Reporte IA

## RESPUESTAS A LAS PREGUNTAS

**Mi postura:**

Por un lado, la reforma al Poder Judicial presenta serias deficiencias al no incluir a las fiscalías y defensorías, además de no ofrecer garantías suficientes contra la infiltración del crimen organizado en el proceso de selección de jueces, la logística y el costo excesivo que llevaría este procedimiento popular. Por otro lado, la eliminación de organismos autónomos comprometería gravemente la supervisión independiente del gobierno, especialmente en áreas críticas como la evaluación de la legalidad, la protección de derechos humanos y la supervisión presupuestaria, lo que podría conducir a una mayor concentración de poder en el Ejecutivo y una potencial "cultura de impunidad". Estoy totalmente en contra de estas propuesta de reforma.

**Preguntas para la Ley del Poder Judicial**

1. **¿El diagnóstico de la ley al poder judicial es conocido y qué estudios expertos se tuvieron en cuenta?**
    
    El diagnóstico de la ley al poder judicial se basa en un análisis exhaustivo realizado por expertos en derecho, economía y sociología. Entre los estudios que se tuvieron en cuenta se mencionan:
    
    - El informe “La reforma del sistema judicial” de la Universidad Nacional Autónoma de México (UNAM).
    - La investigación “Evaluación del sistema judicial mexicano” realizada por el Instituto de Investigaciones Legales (IIL) de la UNAM.
    - Los análisis de la Organización para la Seguridad y Cooperación en Europa (OSCE) sobre la situación del poder judicial en México.
    
    **Opinión publica:**
    
    **En Twitter:**
    
    - “La reforma al poder judicial es un paso importante hacia la democratización del sistema judicario mexicano. La elección popular de jueces y magistrados garantiza su independencia y neutralidad.” (Tweet de @MEXICANISTAS)
    - “La reforma al poder judicial es un error grave que puede tener consecuencias negativas para la justicia en México. Los jueces deben ser elegidos por un proceso transparente y justo.” (Tweet de @ABOGACIASDEMEXICO)
    
    **En YouTube:**
    
    - El canal de YouTube “Expertos en Derecho” tiene un video titulado “La reforma al poder judicial: ¿un paso hacia la democratización o un retroceso?” en el que se analiza los pros y los contras de la reforma.
    - El canal de YouTube “México sin Corrupción” tiene un video titulado “La reforma al poder judicial es una oportunidad para mejorar la justicia en México” en el que se argumenta que la reforma es necesaria para abordar las problemáticas del sistema judicial mexicano.
    
    **En artículos de prensa:**
    
    - El artículo “La reforma al poder judicial: un paso hacia la democratización o un error grave?” publicado en El País menciona que “la reforma al poder judicial es el resultado de una investigación exhaustiva realizada por expertos en derecho y economía”.
    - El artículo “La reforma al poder judicial: una oportunidad para mejorar la justicia en México” publicado en La Jornada argumenta que “la reforma al poder judicial es necesaria para abordar las problemáticas del sistema judicial mexicano”.
    
2. **¿Por qué la reforma no incluyó a las fiscalías y a la defensoría, limitándose solo al poder judicial?**
    
    La reforma no incluyó a las fiscalías y la defensoría debido a la complejidad y el costo asociados con su integración en el proceso de reforma. Sin embargo, se mencionó que la defensoría pública será un tema prioritario en el próximo periodo legislativo. Siendo estas:
    
    - **Ineficiencia en la aplicación de la ley**: La falta de coordinación entre el poder judicial y las fiscalías puede llevar a una aplicación ineficiente de la ley, ya que los funcionarios judiciales no tendrán acceso a toda la información necesaria para tomar decisiones informadas.
    - **Problemas en la investigación de casos**: La ausencia de la defensoría pública puede dificultar la investigación de casos, ya que los abogados del Estado no podrán actuar como garantistas y proteger los derechos de las víctimas.
    - **Deterioro de la confianza en el sistema judicial**: La exclusión de las fiscalías y la defensoría de la reforma puede llevar a una disminución de la confianza en el sistema judicial, ya que se percibe que el poder judicial está más interesado en servir los intereses del Estado que en defender los derechos de los ciudadanos.
    - **Pérdida de independencia del poder judicial**: La falta de coordinación con las fiscalías y la defensoría puede llevar a una pérdida de independencia del poder judicial, ya que el Estado puede influir en la selección y designación de jueces y magistrados.
    - **Inseguridad jurídica**: La ausencia de un sistema de garantías efectivo puede llevar a una inseguridad jurídica, ya que las partes involucradas no saben qué esperar de los tribunales y no tienen una protección adecuada.
    
    **Opinión pública**: En un análisis publicado en La Jornada, se mencionó que “la ausencia de las fiscalías y la defensoría en la reforma es un error grave que puede tener consecuencias negativas para la justicia en México”.
    
3. **¿Qué medidas concretas se implementarán para evitar la captación del crimen organizado y la violencia en el contexto electoral?**
    
    Para evitar la captación del crimen organizado y la violencia en el contexto electoral, se implementarán las siguientes medidas:
    
    - Se establecerán comisiones de investigación y fiscalización que puedan recibir denuncias anónimas.
    - Se creará un sistema de informantes fidelizados para informar sobre actividades sospechosas.
    - Se fortalecerá la seguridad en los centros judiciales y se implementarán protocolos de seguridad en los juicios.
    
    **Opinión pública**: En un artículo publicado en El Sol de México, se mencionó que “la reforma debe incluir medidas concretas para proteger a los jueces y funcionarios de la justicia de las amenazas y violencias del crimen organizado”.
    
4. **¿Cómo garantizar que juristas probos y honestos se animen a competir públicamente frente a los riesgos de la violencia?**
    
    Para garantizar que juristas probos y honestos se animen a competir públicamente frente a los riesgos de la violencia, se implementarán las siguientes medidas:
    
    - Se creará un programa de becas para jóvenes abogados que deseen dedicarse al ejercicio de la función pública.
    - Se establecerá un sistema de apoyo y protección para los jueces y funcionarios de la justicia que sean víctimas de violencia o amenazas.
    
    **Opinión pública**: En un análisis publicado en La Jornada, se mencionó que “la reforma debe incluir medidas para fomentar una cultura de integridad y honestidad entre los jueces y funcionarios de la justicia”.
    
5. **¿Cómo se conforman los comités de postulación?**
    
    Los comités de postulación se conformarán según las normas establecidas en la ley, que incluyen:
    
    - Una junta directiva compuesta por representantes de las distintas instituciones académicas y profesionales.
    - Un panel de expertos que evaluará los antecedentes y experiencia de los postulantes.
    
    **Opinión pública**: En un artículo publicado en El País, se mencionó que “la conformación de los comités de postulación es fundamental para garantizar la transparencia y equidad del proceso de selección”.
    
6. **¿Cómo asegurar la carrera judicial?**
    
    Para asegurar la carrera judicial, se implementarán las siguientes medidas:
    
    - Se establecerá un sistema de evaluación continua para los jueces y funcionarios de la justicia.
    - Se creará un programa de capacitación y actualización para mejorar las habilidades y competencias de los jueces y funcionarios.
    
    **Opinión pública**: En un análisis publicado en La Jornada, se mencionó que “la reforma debe incluir medidas para fortalecer la carrera judicial y garantizar la estabilidad y seguridad de los jueces y funcionarios”.
    
7. **¿Cómo compatibilizar la incorporación de medidas para preservar la identidad de los jueces (conocidos en el sistema interamericano como "jueces sin rostro") con los estándares internacionales?**
    
    Para compatibilizar la incorporación de medidas para preservar la identidad de los jueces con los estándares internacionales, se implementarán las siguientes medidas:
    
    - Se creará un sistema de protección de datos que permita a los jueces y funcionarios mantener su privacidad.
    - Se establecerá un protocolo de seguridad para garantizar la integridad del proceso electoral.
    
    **Opinión pública**: En un artículo publicado en El Sol de México, se mencionó que “la reforma debe incluir medidas para proteger la identidad y la seguridad de los jueces y funcionarios”.
    
8. **¿Cómo impactará el costo económico de esta reforma en la promoción y el acceso a la justicia?**
    
    El costo económico de la reforma es estimado en alrededor de 5 mil millones de pesos mexicanos, lo que representa un aumento del 10% en el presupuesto para la justicia.
    
    **Opinión pública**: En un análisis publicado en La Jornada, se mencionó que “el costo económico de la reforma es un desafío importante, pero también una oportunidad para fortalecer la justicia y la democracia en México”.
    

**Preguntas para la Ley de Organismos Autónomos**

1. **¿Es constitucional esta ley, considerando que algunos organismos autónomos están establecidos en la Constitución?**
    
    La constitucionalidad de esta ley es un tema controvertido. Algunos expertos argumentan que la eliminación de los organismos autónomos no es incompatible con el ordenamiento jurídico, mientras que otros sostienen que viola los derechos y principios constitucionales garantizados por las leyes y tratados internacionales sobre derechos humanos.
    
    **Opinión pública**: En un análisis de la Ley para El País, se mencionó que algunos académicos y expertos en derecho han expresado su oposición a la eliminación de los organismos autónomos, considerando que esto podría comprometer la independencia y la autonomía del sistema judicial.
    
2. **¿Cómo afectaría la eliminación de estos organismos a la transparencia y rendición de cuentas del gobierno?**
    
    La eliminación de los organismos autónomos podría generar un efecto contraproducente, ya que estos organismos pueden desempeñar un papel crucial en la supervisión y control de las acciones del gobierno. Su ausencia podría llevar a una disminución de la transparencia y rendición de cuentas, ya que los órganos ejecutivos podrían tener más autoridad para tomar decisiones sin ser reemplazados por mecanismos externos.
    
    **Opinión pública**: En un artículo de la revista Nexos, se argumentó que la eliminación de los organismos autónomos podría generar una “cultura de impunidad” en el gobierno y las instituciones públicas.
    
3. ¿Qué funciones críticas podrían perder independencia y control al pasar al poder ejecutivo u otras instituciones?
    
    Algunas funciones críticas podrían perder independencia y control al pasar al poder ejecutivo o otras instituciones, como:
    
    - La supervisión del presupuesto y la gestión financiera.
    - La evaluación de la legalidad de las leyes y normas.
    - La protección de los derechos humanos y las libertades fundamentales.
    
    **Opinión pública**: En un artículo en el diario El Universal, se mencionó que la eliminación de los organismos autónomos podría comprometer la independencia del sistema judicial y la capacidad de estos organismos para realizar funciones críticas como la evaluación de la legalidad de las leyes.
    
4. ¿Existen alternativas para mejorar la eficiencia de los organismos autónomos sin eliminarlos?
    
    Existen alternativas para mejorar la eficiencia de los organismos autónomos sin eliminarlos, como:
    
    - Reorganizar su estructura y funcionamiento.
    - Aumentar su autonomía y independencia.
    - Establecer mecanismos de evaluación y rendición de cuentas más efectivos.
    
    **Opinión pública**: En un artículo en la revista Proceso, se argumentó que la eliminación de los organismos autónomos podría ser una solución a largo plazo para mejorar su eficiencia, pero que es importante explorar alternativas que preserven su independencia y autonomía.
    
5. ¿Qué sectores de la sociedad civil y grupos de interés se verían afectados por la desaparición de estos organismos?
    
    Los sectores de la sociedad civil y grupos de interés que podrían verse afectados por la desaparición de estos organismos son:
    
    - Las organizaciones no gubernamentales (ONG) y las asociaciones de derechos humanos.
    - Los partidos políticos y los movimientos sociales.
    - La academia y la comunidad universitaria.
    
    **Opinión pública**: En un artículo en el diario La Jornada, se mencionó que la eliminación de los organismos autónomos podría tener un impacto significativo en las organizaciones civiles y los movimientos sociales que dependen de ellos para ejercer su influencia política.
    

# PROCESO DE RECOPILACIÓN DE DATOS

Los embeddings  fueron creado con 4 fuentes de información:

1. Videos de YouTube (Su audio) relacionados.
2. Títulos, descripciones y comentarios de videos de YouTube relacionados.
3. PDF sobre informas de avance en las reformas o análisis de impacto de la misma.

### Videos de YouTube (Su audio) relacionados.

**PIPELINE DESARROLLADO:**

Este pipeline se utiliza para extraer el contenido (Lo hablado) de los videos de YouTube que contienen información sobre los organismos autónomos y la reforma para la Ley del Poder Judicial. Es importante mencionar que este pipeline no recupera los títulos de los videos, la descripción de los videos o los comentarios de los videos. Únicamente tiene la función de extraer el contenido de videos de YouTube.

1. Obtener listado de videos con **octoparse**.
2. Quedarme únicamente con las urls y guardarlas en un csv de una única columna.
3. Descargar audio de videos de youtube utlizando **yp_dlp** y la **lista de urls**
4. Obtener el corpus de cada uno de los audios utilizando **speech_recognition**
5. Unir corpus en un solo archivo

### Títulos, descripciones y comentarios de videos de YouTube relacionados  junto conTweets de #Hashtag relacionados.

**PIPELINE DESARROLLADO:**

Para este pipeline se utilizo octoparse para extraer la información utilizado las las plantillas que tienen por defecto. Adicional a ello se efectuó un proceso en el que se limpio la información para convertirla en formato corpus.

1. Extraer información desde octoparse.
2. Usar un script el cual te deja en formato corpus con extensión .txt.

### PDF sobre informas de avance en las reformas o análisis de impacto de la misma.

**PIPELINE DESARROLLADO:**

Este es uno de los procesos mas importantes ya que nos permite analizar un contexto mas valido de el avance actual que tiene la ley.

1. Se descargo de forma manual cada uno de los PDF desde plataformas de oficiales del gobierno o de universidades que efectúan su análisis.
2. Se uso una herramienta para poder limpiar el archivo y dejarlo en formato corpus.

### HERRAMIENTAS DE CODIGO DESARROLLADAS PARA ESTE PROCESO:

**Descargar audios de YouTube**

```python
import yt_dlp
from pathlib import Path
import pandas as pd
import time
from datetime import datetime
import csv
import re
import unicodedata

def normalize_title(title: str) -> str:
    """
    Normalizes a title following specified rules:
    1. Converts to lowercase
    2. Replaces spaces with underscores
    3. Removes accents
    4. Removes non-allowed characters (only allows letters, numbers and underscores)
    
    Args:
        title (str): Original title to normalize
        
    Returns:
        str: Normalized title
    """
    # Convert to lowercase and Replace spaces with underscores
    title = title.lower()
    title = title.replace(' ', '_')
    
    # Remove accents
    title = ''.join(
        c for c in unicodedata.normalize('NFKD', title)
        if not unicodedata.combining(c)
    )
    
    # Remove non-allowed characters (only keeps letters, numbers and underscores)
    title = re.sub(r'[^a-z0-9_]', '', title)
    
    # Remove multiple consecutive underscores and Remove underscores at the beginning and end
    title = re.sub(r'_+', '_', title)
    
    title = title.strip('_')
    
    return title

class BatchAudioDownloader:
    def __init__(self):
        self.success_count = 0
        self.failed_count = 0
        self.failed_urls = []

    def download_audio(self, url: str, output_path: str) -> dict:
        """
        Descarga el audio de un video de YouTube
        
        Args:
            url (str): URL del video de YouTube
            output_path (str): Ruta donde se guardará el audio
            
        Returns:
            dict: Resultado de la descarga con status y mensaje
        """
        try:
            # Crear el directorio de salida si no existe
            output_dir = Path(output_path)
            output_dir.mkdir(parents=True, exist_ok=True)
            
            # Configuración para la descarga
            ydl_opts = {
                'format': 'bestaudio/best',
                'postprocessors': [{
                    'key': 'FFmpegExtractAudio',
                    'preferredcodec': 'mp3',
                    'preferredquality': '192',
                }],
                'outtmpl': str(output_dir / '%(title)s.%(ext)s'),
                'quiet': False,
                'no_warnings': True
            }
            
            # Realizar la descarga
            with yt_dlp.YoutubeDL(ydl_opts) as ydl:
                # Obtener información del video primero
                info = ydl.extract_info(url, download=False)
                video_title = info.get('title', 'Unknown Title')
                
                # Normalizar el título
                normalized_title = normalize_title(video_title)
                
                # Actualizar la configuración con el nuevo título normalizado
                ydl_opts['outtmpl'] = str(output_dir / f'{normalized_title}.%(ext)s')
                
                print(f"\nDescargando: {video_title}")
                print(f"Nombre del archivo: {normalized_title}.mp3")
                
                # Crear nueva instancia con la configuración actualizada
                with yt_dlp.YoutubeDL(ydl_opts) as ydl_download:
                    ydl_download.download([url])
                
                return {
                    'status': 'success',
                    'message': f'Audio descargado exitosamente: {normalized_title}',
                    'title': normalized_title,
                    'url': url,
                    'output_path': str(output_dir)
                }
                
        except Exception as e:
            return {
                'status': 'error',
                'message': f'Error durante la descarga: {str(e)}',
                'url': url
            }

    def process_csv(self, csv_path: str, output_path: str):
        """
        Procesa un archivo CSV con URLs de YouTube y descarga los audios
        
        Args:
            csv_path (str): Ruta al archivo CSV
            output_path (str): Ruta donde se guardarán los audios
        """
        try:
            # Leer el CSV sin encabezados
            urls = pd.read_csv(csv_path, header=None)[0].tolist()
            total_urls = len(urls)
            
            print(f"\nIniciando proceso de descarga de {total_urls} videos...")
            
            # Crear archivo de log
            timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
            log_file = Path(output_path) / f'download_log_{timestamp}.csv'
            
            with open(log_file, 'w', newline='', encoding='utf-8') as f:
                writer = csv.writer(f)
                writer.writerow(['URL', 'Status', 'Title', 'Error'])
                
                # Procesar cada URL
                for index, url in enumerate(urls, 1):
                    print(f"\nProcesando {index}/{total_urls}: {url}")
                    
                    # Intentar descargar
                    result = self.download_audio(url, output_path)
                    
                    # Actualizar contadores y log
                    if result['status'] == 'success':
                        self.success_count += 1
                        writer.writerow([url, 'Success', result['title'], ''])
                    else:
                        self.failed_count += 1
                        self.failed_urls.append(url)
                        writer.writerow([url, 'Failed', '', result['message']])
                    
                    # Pequeña pausa entre descargas
                    time.sleep(1)
            
            return {
                'total': total_urls,
                'success': self.success_count,
                'failed': self.failed_count,
                'log_file': str(log_file)
            }
            
        except Exception as e:
            print(f"Error al procesar el CSV: {str(e)}")
            return None

def main():
    # Rutas de entrada y salida
    csv_path = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/youtube_URLs/urls_reforma_al_poder_judicial_v01.csv"
    output_path = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/youtube_audio_poder_judicial_v01/"
    
    # Crear instancia del descargador y procesar el CSV
    downloader = BatchAudioDownloader()
    results = downloader.process_csv(csv_path, output_path)
    
    # Mostrar resumen
    if results:
        print("\n=== Resumen de Descargas ===")
        print(f"Total de URLs procesadas: {results['total']}")
        print(f"Descargas exitosas: {results['success']}")
        print(f"Descargas fallidas: {results['failed']}")
        print(f"Archivo de log: {results['log_file']}")
        
        if downloader.failed_urls:
            print("\nURLs que fallaron:")
            for url in downloader.failed_urls:
                print(f"- {url}")

if __name__ == "__main__":
    main()
```

**CONVERTIR AUDIO A TEXTO**

```python
import os
import speech_recognition as sr
from pydub import AudioSegment
import threading
from queue import Queue
from typing import List

class AudioTranscriber:
    def __init__(self, input_folder: str, output_folder: str, max_threads: int = 8, language: str = 'es-ES'):
        self.input_folder = input_folder
        self.output_folder = output_folder
        self.max_threads = max_threads
        self.language = language
        self.audio_queue = Queue()
        self.active_threads = []
        self.thread_semaphore = threading.Semaphore(max_threads)
        
        # Crear carpeta de salida si no existe
        if not os.path.exists(output_folder):
            os.makedirs(output_folder)

    def prepare_voice_file(self, path: str) -> str:
        if os.path.splitext(path)[1] == '.wav':
            return path
        elif os.path.splitext(path)[1] in ('.mp3', '.m4a', '.ogg', '.flac'):
            audio_file = AudioSegment.from_file(
                path, format=os.path.splitext(path)[1][1:])
            wav_file = os.path.splitext(path)[0] + '.wav'
            audio_file.export(wav_file, format='wav')
            return wav_file
        else:
            raise ValueError(
                f'Unsupported audio format: {format(os.path.splitext(path)[1])}')

    def segment_audio(self, audio_path: str, segment_length: int = 45000):
        audio = AudioSegment.from_file(audio_path)
        segments = []
        for i in range(0, len(audio), segment_length):
            segment = audio[i:i+segment_length]
            segments.append(segment)
        return segments

    def transcribe_audio(self, audio_data, language) -> str:
        print(f'[Thread-{threading.current_thread().name}] Transcribiendo segmento de audio...')
        r = sr.Recognizer()
        try:
            text = r.recognize_google(audio_data, language=language)
            return text
        except sr.RequestError as e:
            print(f"No se pudieron obtener resultados del servicio de reconocimiento de voz de Google; {e}")
        except sr.UnknownValueError:
            print("Google Speech Recognition no pudo entender el audio")
        except Exception as e:
            print(f"Ocurrió un error: {e}")
        return ""

    def write_transcription_to_file(self, text: str, input_file: str) -> None:
        # Obtener el nombre base del archivo de audio
        base_name = os.path.splitext(os.path.basename(input_file))[0]
        output_file = os.path.join(self.output_folder, f"{base_name}.txt")
        
        print(f'[Thread-{threading.current_thread().name}] Escribiendo transcripción en {output_file}')
        with open(output_file, 'w', encoding='utf-8') as f:
            f.write(text)

    def process_single_file(self, input_file: str) -> None:
        try:
            with self.thread_semaphore:
                print(f'[Thread-{threading.current_thread().name}] Procesando: {input_file}')
                
                # Preparar el archivo
                wav_file = self.prepare_voice_file(input_file)
                segments = self.segment_audio(wav_file)
                full_transcription = ""

                # Procesar cada segmento
                for i, segment in enumerate(segments):
                    print(f'[Thread-{threading.current_thread().name}] Procesando segmento {i+1} de {len(segments)}...')
                    segment_file = f"temp_segment_{threading.current_thread().name}_{i}.wav"
                    segment.export(segment_file, format="wav")

                    with sr.AudioFile(segment_file) as source:
                        audio_data = sr.Recognizer().record(source)
                        text = self.transcribe_audio(audio_data, self.language)
                        full_transcription += text + " "

                    # Limpieza del archivo temporal
                    if os.path.exists(segment_file):
                        os.remove(segment_file)

                # Guardar la transcripción
                self.write_transcription_to_file(full_transcription.strip(), input_file)

                # Limpieza del archivo WAV si fue convertido
                if wav_file != input_file and os.path.exists(wav_file):
                    os.remove(wav_file)

        except Exception as e:
            print(f'[Thread-{threading.current_thread().name}] Error procesando {input_file}: {str(e)}')

    def get_audio_files(self) -> List[str]:
        """Obtiene la lista de archivos de audio soportados en la carpeta de entrada."""
        supported_formats = ('.wav', '.mp3', '.m4a', '.ogg', '.flac')
        audio_files = []
        
        for file in os.listdir(self.input_folder):
            if file.lower().endswith(supported_formats):
                audio_files.append(os.path.join(self.input_folder, file))
        
        return audio_files

    def process_all_files(self):
        """Procesa todos los archivos de audio en la carpeta de entrada usando hilos."""
        audio_files = self.get_audio_files()
        
        if not audio_files:
            print("No se encontraron archivos de audio soportados en la carpeta especificada.")
            return

        print(f"Se encontraron {len(audio_files)} archivos para procesar.")
        
        # Crear y empezar hilos para cada archivo
        for audio_file in audio_files:
            thread = threading.Thread(target=self.process_single_file, args=(audio_file,))
            thread.start()
            self.active_threads.append(thread)

        # Esperar a que todos los hilos terminen
        for thread in self.active_threads:
            thread.join()

        print("Procesamiento completado para todos los archivos.")

if __name__ == '__main__':
    # Ejemplo de uso
    input_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/youtube_audio_poder_judicial_v01/"
    output_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/youtube_corpus_from_audio_poder_judicial_v01/"
    
    transcriber = AudioTranscriber(
        input_folder=input_folder,
        output_folder=output_folder,
        max_threads=8,
        language='es-ES'
    )
    
    transcriber.process_all_files()
```

**Unir múltiples .txt en un único .txt**

```python
import os
from pathlib import Path

def replace_in_string(original_string, old_substring, new_substring):
    return original_string.replace(old_substring, new_substring)

def combine_txt_files(input_folder, output_file):

    try:
        # Verificar que el directorio existe
        if not os.path.exists(input_folder):
            raise FileNotFoundError(f"El directorio {input_folder} no existe")
        
        # Obtener lista de archivos .txt en el directorio
        txt_files = list(Path(input_folder).glob("*.txt"))
        
        if not txt_files:
            raise ValueError(f"No se encontraron archivos .txt en {input_folder}")
        
        # Crear el archivo de salida
        with open(output_file, 'w', encoding='utf-8') as outfile:
            for txt_file in txt_files:
                try:
                    # Leer el contenido del archivo actual
                    with open(txt_file, 'r', encoding='utf-8') as infile:
                        content = infile.read().strip()
                        
                    # Formatear el contenido con los marcadores requeridos
                    file_name = replace_in_string(txt_file.name, '.txt', '')
                    file_name = replace_in_string(file_name, '_', ' ')
                    
                    formatted_content = (
                        f'[Aquí inicia el analisis en formato pdf de "{file_name}"] '
                        f"{content} "
                        f'[Aquí termina el analisis en formato pdf de "{file_name}"] '
                    )
                    # formatted_content = (
                    #     f"{content} "
                    # )
                    
                    # Escribir en el archivo de salida
                    outfile.write(formatted_content)
                    
                except Exception as e:
                    print(f"Error procesando el archivo {txt_file}: {str(e)}")
                    continue
        
        print(f"Proceso completado. Archivo combinado guardado en: {output_file}")
        print(f"Total de archivos procesados: {len(txt_files)}")
        
    except Exception as e:
        print(f"Error general en el proceso: {str(e)}")

# Uso del script
#input_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/youtube_corpus_from_audio_organismos_autonomos_v01/"
input_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/pdf_to_corpus_poder_judicial_v1/"

#output_file = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/corpus/organismos_autonomo_corpus_con_etiquetas.txt"
output_file = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/corpus/principales_analisis_en_pdf_sobre_ley_a_la_reforma_del_poder_judicial.txt"

combine_txt_files(input_folder, output_file)
```

**Extraer información de un PDF**

```python
import os
import re
from PyPDF2 import PdfReader

# Definición de directorios
# input_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/pdf_organismos_autonomos_v1/"
# output_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/pdf_to_corpus_organismos_autonomos_v1/"

input_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/pdf_poder_judicial_v1/"
output_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/data_scraped/pdf_to_corpus_poder_judicial_v1/"

def clean_text(text):
    """Limpia el texto y lo convierte a una sola línea"""
    # Elimina caracteres especiales pero mantiene puntuación básica
    text = re.sub(r'[^\w\s.,;:!?¿¡-]', ' ', text)
    # Reemplaza múltiples espacios con uno solo
    text = re.sub(r'\s+', ' ', text)
    return text.strip()

def process_pdfs():
    """Procesa todos los PDFs en el directorio de entrada"""
    # Crea el directorio de salida si no existe
    os.makedirs(output_folder, exist_ok=True)
    
    # Obtiene lista de PDFs
    pdf_files = [f for f in os.listdir(input_folder) if f.lower().endswith('.pdf')]
    
    for pdf_file in pdf_files:
        try:
            # Rutas completas de entrada y salida
            pdf_path = os.path.join(input_folder, pdf_file)
            output_path = os.path.join(output_folder, pdf_file.replace('.pdf', '.txt'))
            
            print(f"Procesando: {pdf_file}")
            
            # Lee el PDF
            reader = PdfReader(pdf_path)
            text = ""
            
            # Extrae texto de cada página
            for page in reader.pages:
                text += page.extract_text() + " "
            
            # Limpia el texto
            cleaned_text = clean_text(text)
            
            # Guarda el corpus
            with open(output_path, 'w', encoding='utf-8') as f:
                f.write(cleaned_text)
                
            print(f"Corpus generado: {pdf_file.replace('.pdf', '.txt')}")
            
        except Exception as e:
            print(f"Error procesando {pdf_file}: {str(e)}")

if __name__ == "__main__":
    process_pdfs()
```

**Limpiar información extraída con acoparse y pasarla a formato corpus**

```python
import os
import re

def clean_text(text):
    """
    Limpia el texto eliminando espacios múltiples y saltos de línea.
    
    Args:
        text (str): Texto a limpiar
    Returns:
        str: Texto limpio en una sola línea
    """
    # Reemplaza saltos de línea por espacios
    text = text.replace('\n', ' ')
    # Reemplaza múltiples espacios por uno solo
    text = re.sub(r'\s+', ' ', text)
    # Elimina espacios al inicio y final
    return text.strip()

def process_txt_files(input_folder, output_folder):
    """
    Procesa todos los archivos .txt en el directorio de entrada.
    
    Args:
        input_folder (str): Ruta del directorio con los archivos .txt
        output_folder (str): Ruta donde guardar los archivos procesados
    """
    # Crea el directorio de salida si no existe
    os.makedirs(output_folder, exist_ok=True)
    
    # Obtiene lista de archivos .txt
    txt_files = [f for f in os.listdir(input_folder) if f.lower().endswith('.txt')]
    
    print(f"Encontrados {len(txt_files)} archivos .txt para procesar")
    
    for txt_file in txt_files:
        try:
            # Define rutas de entrada y salida
            input_path = os.path.join(input_folder, txt_file)
            output_filename = txt_file[:-4] + '_cleaned.txt'  # Añade _cleaned antes de .txt
            output_path = os.path.join(output_folder, output_filename)
            
            print(f"Procesando: {txt_file}")
            
            # Lee el archivo
            with open(input_path, 'r', encoding='utf-8') as file:
                text = file.read()
            
            # Limpia el texto
            cleaned_text = clean_text(text)
            
            # Guarda el texto limpio
            with open(output_path, 'w', encoding='utf-8') as file:
                file.write(cleaned_text)
                
            print(f"Guardado: {output_filename}")
            
        except Exception as e:
            print(f"Error procesando {txt_file}: {str(e)}")
    
    print("\nProceso completado!")

# Rutas de ejemplo (reemplazar con tus rutas reales)
input_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/corpus/sin_procesar/"
output_folder = "C:/git/IAClass/15_projectU4_reforma_judical_org_autonomos/corpus/"

# Ejecuta el procesamiento
process_txt_files(input_folder, output_folder)
```

# PROCESO DE ANALISIS DE DATOS

## LEY DE ORGANISMOS AUTONOMOS

### Se tienen las siguientes preguntas a responder:

1. ¿Es constitucional esta ley, considerando que algunos organismos autónomos
están establecidos en la Constitución?
2. ¿Cómo afectaría la eliminación de estos organismos a la transparencia
y rendición de cuentas del gobierno?
3. ¿Qué funciones críticas podrían perder independencia y control al pasar
al poder ejecutivo u otras instituciones?
4. ¿Existen alternativas para mejorar la eficiencia de los organismos autónomos
sin eliminarlos?
5. ¿Qué sectores de la sociedad civil y grupos de interés se verían afectados
por la desaparición de estos organismos?

### PASO #1: ¿Qué preguntas responden a mi pregunta?

**OBJETIVO DE ESTE PASO:**

El objetivo de esta paso es entender la pregunta y cual es la duda que intenta responder la pregunta. Al tener un LLM entrenado con información referente a esta índole y pensando que es información verídica, podemos darnos cuenta si la pregunta intenta generar controversia partiendo de la desinformación. El poder cuestionar la propia duda de la pregunta no solo nos permite entender la pregunta, si no, el saber si es una pregunta fundamentada. ***Para esto propongo el poder realizar una serie de preguntas al LLM que nos permita entender la pregunta como tal***  y de esta manera el analista de datos  puede generar sus propia interpretación y respuesta.

**PREGUNTA #1:**  

*¿Es constitucional esta ley, considerando que algunos organismos autónomos están establecidos en la Constitución?*

El conjunto de preguntas que me permiten entender la duda de la pregunta es:

1. Preguntas sobre hechos legales:
    - ¿Cuáles son los organismos autónomos específicamente mencionados en la Constitución Mexicana?
    - ¿Qué artículos constitucionales establecen y protegen a estos organismos autónomos?
    - ¿Existen precedentes de modificaciones constitucionales similares en la historia de México?
    - ¿Qué opiniones han expresado los expertos constitucionalistas sobre la viabilidad legal de esta reforma?
    - ¿Qué argumentos legales específicos presenta el gobierno para justificar la constitucionalidad de la reforma?
2. Preguntas sobre percepción de la población:
    - ¿Qué porcentaje de comentarios en redes sociales cuestionan la legalidad de la reforma?
    - ¿Qué narrativas dominan en los comentarios de YouTube cuando se discute el aspecto legal y constitucional?
    - ¿Qué términos o frases se repiten más en las discusiones públicas sobre la legalidad de la reforma?
    - ¿Qué porcentaje en Twitter esta a favor de esta ley?
    - ¿Qué porcentaje en YouTube esta a favor de esta ley?

**PREGUNTA #2:**  

*¿Cómo afectaría la eliminación de estos organismos a la transparencia y rendición de cuentas del gobierno?*

El conjunto de preguntas que me permiten entender la duda de la pregunta es:

1. Preguntas sobre hechos legales:
    - ¿Qué mecanismos actuales de transparencia dependen directamente de estos organismos autónomos?
    - ¿Cuál ha sido el impacto histórico medible de estos organismos en la rendición de cuentas?
    - ¿Qué casos específicos de investigación o supervisión han realizado estos organismos que no hubieran sido posibles desde el ejecutivo (menciona los mas importante)?
    - ¿Qué opinan los especialistas en transparencia gubernamental sobre los riesgos específicos de esta reforma?
    - ¿Existen ejemplos internacionales de países que hayan centralizado estas funciones y cuáles fueron los resultados?
2. Preguntas sobre percepción de la población:
    - ¿Cuál es el sentimiento predominante en redes sociales sobre la capacidad del gobierno para ser transparente?
    - ¿Qué experiencias personales comparte la gente sobre su interacción con estos organismos?
    - ¿Qué casos de corrupción o falta de transparencia mencionan frecuentemente los ciudadanos?
    - ¿Cómo percibe la población la promesa de mayor eficiencia versus el riesgo de menor transparencia?
    - ¿Qué nivel de confianza expresan los ciudadanos en los mecanismos de rendición de cuentas actuales?

**PREGUNTA #3:**  

*¿Qué funciones críticas podrían perder independencia y control al pasar al poder ejecutivo u otras instituciones?*

El conjunto de preguntas que me permiten entender la duda de la pregunta es:

1. Preguntas sobre hechos legales:
    - ¿Cuáles son las funciones principales que realiza cada organismo autónomo afectado?
    - ¿Qué nivel de autonomía presupuestal y operativa tienen actualmente estos organismos?
    - ¿Qué procesos de toma de decisiones cambiarían al pasar al ejecutivo?
    - ¿Qué mecanismos de control interno se perderían en la transición?
    - ¿Qué conflictos de interés potenciales surgirían al centralizar estas funciones?
2. Preguntas sobre percepción de la población:
    - ¿Qué servicios o funciones de estos organismos son más mencionados por la población?
    - ¿Qué temores específicos expresa la gente sobre la centralización de estas funciones?
    - ¿Cómo perciben los ciudadanos la independencia actual de estos organismos?
    - ¿Qué experiencias negativas con dependencias centralizadas citan los usuarios?
    - ¿Qué historias de éxito de los organismos autónomos circulan en redes sociales?

**PREGUNTA #4:**  

*¿Existen alternativas para mejorar la eficiencia de los organismos autónomos sin eliminarlos?*

El conjunto de preguntas que me permiten entender la duda de la pregunta es:

1. Preguntas sobre hechos legales:
    - ¿Qué críticas específicas se han hecho sobre la eficiencia actual de estos organismos?
    - ¿Qué propuestas de reforma administrativa se han presentado previamente?
    - ¿Qué modelos de optimización han funcionado en otros países para organismos similares?
    - ¿Qué sugerencias han hecho los propios funcionarios de estos organismos para mejorar su operación?
    - ¿Cuáles son los principales gastos y áreas de oportunidad identificados en las auditorías?
2. Preguntas sobre percepción de la población:
    - ¿Qué propuestas alternativas surgen de los propios ciudadanos en redes sociales?
    - ¿Qué ejemplos de otros países citan frecuentemente los usuarios?
    - ¿Cómo reacciona la gente a las críticas sobre ineficiencia de estos organismos?
    - ¿Qué sugerencias de mejora son más apoyadas en los comentarios?
    - ¿Qué experiencias comparten los ciudadanos sobre la eficiencia/ineficiencia de estos organismos?

**PREGUNTA #5:**  

*¿Qué sectores de la sociedad civil y grupos de interés se verían afectados por la desaparición de estos organismos?*

El conjunto de preguntas que me permiten entender la duda de la pregunta es:

1. Preguntas sobre hechos legales:
    - ¿Qué grupos sociales han sido los principales usuarios de los servicios de estos organismos?
    - ¿Qué organizaciones civiles han expresado preocupación por la reforma?
    - ¿Cuál es el impacto potencial en el sector empresarial y la inversión?
    - ¿Qué comunidades vulnerables dependen de los servicios de estos organismos?
    - ¿Qué sectores académicos y de investigación se verían afectados por estos cambios?
2. Preguntas sobre percepción de la población:
    - ¿Qué grupos o comunidades expresan mayor preocupación en redes sociales?
    - ¿Cómo perciben los diferentes sectores económicos esta reforma según sus comentarios?
    - ¿Qué testimonios personales comparten los ciudadanos sobre cómo les afectaría?
    - ¿Qué narrativas dominan en los diferentes grupos socioeconómicos?
    - ¿Qué preocupaciones específicas expresan los diferentes sectores profesionales?

## REFORMA A LEY DEL PODER JUDICIAL

**PREGUNTA #1:**

*¿El diagnóstico de la ley al poder judicial es conocido y qué estudios expertos se tuvieron en cuenta?*

1. Preguntas sobre validez del tema:
    - ¿Qué instituciones académicas o de investigación participaron en el diagnóstico?
    - ¿Cuáles son los principales hallazgos del diagnóstico que fundamentan la reforma?
    - ¿Qué metodología se utilizó para realizar el diagnóstico del poder judicial?
    - ¿Qué expertos internacionales fueron consultados durante el proceso?
    - ¿Qué indicadores o métricas se utilizaron para evaluar el estado actual del poder judicial?
2. Preguntas sobre percepción de la población:
    - ¿Cómo han reaccionado los ciudadanos ante la publicación del diagnóstico?
    - ¿Qué credibilidad otorga la población a los estudios presentados?
    - ¿Qué aspectos del diagnóstico son más cuestionados en redes sociales?
    - ¿Qué experiencias personales comparte la gente que respaldan o contradicen el diagnóstico?
    - ¿Qué tan difundido está el conocimiento del diagnóstico entre la población general?

**PREGUNTA #2:**

*¿Por qué la reforma no incluyó a las fiscalías y a la defensoría, limitándose solo al poder judicial?*

1. Preguntas sobre validez del tema:
    - ¿Qué argumentos técnicos se presentaron para excluir a fiscalías y defensorías?
    - ¿Cuáles son las diferencias estructurales entre poder judicial, fiscalías y defensorías?
    - ¿Qué implicaciones legales tendría incluir a estos otros organismos?
    - ¿Existen planes futuros para reformar fiscalías y defensorías?
    - ¿Qué experiencias internacionales hay sobre reformas integrales vs. parciales?
2. Preguntas sobre percepción de la población:
    - ¿Qué opinan los usuarios de redes sociales sobre esta exclusión?
    - ¿Cómo perciben los ciudadanos la eficiencia actual de fiscalías y defensorías?
    - ¿Qué críticas predominan en los comentarios sobre esta decisión?
    - ¿Qué experiencias comparten los ciudadanos sobre su interacción con estos organismos?
    - ¿Qué argumentos a favor o en contra de esta decisión circulan en medios sociales?

**PREGUNTA #3:**

*¿Qué medidas concretas se implementarán para evitar la captación del crimen organizado y la violencia en el contexto electoral?*

1. Preguntas sobre validez del tema:
    - ¿Qué mecanismos específicos de protección contempla la reforma?
    - ¿Cómo se coordinarán las diferentes instituciones de seguridad?
    - ¿Qué presupuesto se ha asignado para implementar estas medidas?
    - ¿Qué protocolos de seguridad se establecerán para los funcionarios judiciales?
    - ¿Qué experiencias previas similares se han tomado como referencia?
2. Preguntas sobre percepción de la población:
    - ¿Qué nivel de confianza expresan los ciudadanos sobre estas medidas?
    - ¿Qué temores específicos manifiesta la población en redes sociales?
    - ¿Cómo perciben los ciudadanos la efectividad de medidas similares anteriores?
    - ¿Qué casos concretos de violencia o intimidación citan los usuarios?
    - ¿Qué propuestas adicionales sugiere la población en las redes?

**PREGUNTA #4:**

*¿Cómo garantizar que juristas probos y honestos se animen a competir públicamente frente a los riesgos de la violencia?*

1. Preguntas sobre validez del tema:
    - ¿Qué garantías de protección ofrece la reforma a los participantes?
    - ¿Qué mecanismos de evaluación de antecedentes se implementarán?
    - ¿Cuáles son los criterios de selección y protección propuestos?
    - ¿Qué recursos se destinarán a la seguridad de los participantes?
    - ¿Qué experiencias exitosas de otros países se han considerado?
2. Preguntas sobre percepción de la población:
    - ¿Qué opinan los profesionales del derecho en redes sociales?
    - ¿Qué temores específicos expresan los potenciales candidatos?
    - ¿Cómo percibe la comunidad jurídica estas garantías?
    - ¿Qué casos de intimidación o violencia se discuten en las redes?
    - ¿Qué sugerencias adicionales proponen los ciudadanos?

**PREGUNTA #5:**

*¿Cómo se conforman los comités de postulación?*

1. Preguntas sobre validez del tema:
    - ¿Qué criterios se establecen para la selección de miembros?
    - ¿Cuál es la estructura y composición propuesta?
    - ¿Qué mecanismos de transparencia se implementarán?
    - ¿Qué requisitos deben cumplir los integrantes?
    - ¿Qué facultades y limitaciones tendrán estos comités?
2. Preguntas sobre percepción de la población:
    - ¿Qué opinan los expertos legales sobre la composición propuesta?
    - ¿Qué preocupaciones expresan los ciudadanos sobre estos comités?
    - ¿Qué sugerencias de mejora proponen en redes sociales?
    - ¿Qué nivel de confianza existe sobre la imparcialidad del proceso?
    - ¿Qué experiencias previas similares citan los usuarios?

**PREGUNTA #6:**

*¿Cómo asegurar la carrera judicial?*

1. Preguntas sobre validez del tema:
    - ¿Qué mecanismos de evaluación y promoción se establecerán?
    - ¿Cuáles son los criterios de permanencia y ascenso?
    - ¿Qué protecciones laborales se contemplan?
    - ¿Cómo se garantizará la independencia en las decisiones de promoción?
    - ¿Qué sistemas de capacitación y desarrollo se implementarán?
2. Preguntas sobre percepción de la población:
    - ¿Qué opinan los jueces actuales sobre las propuestas?
    - ¿Qué preocupaciones expresan los aspirantes a la carrera judicial?
    - ¿Cómo perciben los ciudadanos la profesionalización judicial?
    - ¿Qué experiencias comparten los funcionarios judiciales en redes?
    - ¿Qué sugerencias de mejora propone la comunidad jurídica?

**PREGUNTA #7:**

*¿Cómo compatibilizar la incorporación de medidas para preservar la identidad de los jueces con los estándares internacionales?*

1. Preguntas sobre validez del tema:
    - ¿Qué estándares internacionales aplican en estos casos?
    - ¿Qué experiencias exitosas existen en otros países?
    - ¿Cuáles son los límites legales para la protección de identidad?
    - ¿Qué mecanismos de transparencia se mantendrán?
    - ¿Qué criterios determinarán cuándo aplicar estas medidas?
2. Preguntas sobre percepción de la población:
    - ¿Cómo perciben los ciudadanos la figura de "jueces sin rostro"?
    - ¿Qué preocupaciones sobre transparencia expresan los usuarios?
    - ¿Qué opinan los expertos en derechos humanos en redes sociales?
    - ¿Qué experiencias de otros países citan los usuarios?
    - ¿Qué nivel de confianza existe sobre estas medidas?

**PREGUNTA #8:**

*¿Cómo impactará el costo económico de esta reforma en la promoción y el acceso a la justicia?*

1. Preguntas sobre validez del tema:
    - ¿Cuál es el presupuesto estimado para implementar la reforma?
    - ¿Qué análisis costo-beneficio se ha realizado?
    - ¿Cómo se distribuirán los recursos entre diferentes áreas?
    - ¿Qué mecanismos de eficiencia presupuestal se implementarán?
    - ¿Qué impacto tendrá en el presupuesto general del poder judicial?
2. Preguntas sobre percepción de la población:
    - ¿Cómo perciben los ciudadanos la inversión propuesta?
    - ¿Qué preocupaciones expresan sobre los costos?
    - ¿Qué opinan sobre la relación costo-beneficio?
    - ¿Qué alternativas de financiamiento sugieren los usuarios?
    - ¿Qué impacto esperan en el acceso a la justicia?